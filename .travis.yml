sudo: false

language: node_js
node_js: 13

after_failure:
  - chmod +x ./travis/webhook.sh
  - 'if [ "$TRAVIS_EVENT_TYPE" != "pull_request" ]; then ./travis/webhook.sh; fi'

jobs:
    include:
      - stage: test

      - stage: build
        script: npm run build

      - stage: webhook
        if: type != pull_request
        install: skip
        script:
          - chmod +x ./travis/webhook.sh
          - ./travis/webhook.sh
